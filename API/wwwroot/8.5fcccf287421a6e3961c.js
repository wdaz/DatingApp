(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1F4K":function(e,n,t){"use strict";t.r(n),t.d(n,"MessagesModule",(function(){return Q}));var i=t("3Pt+"),s=t("ofXK"),c=t("fXoL"),a=t("Qskx"),r=t("xuvy"),o=t("s3T5"),b=t("tyNb"),g=t("Lm2G"),l=t("twue");function d(e,n){1&e&&(c.Qb(0,"div",10),c.Qb(1,"h3"),c.Ac(2,"No messages"),c.Pb(),c.Pb())}function u(e,n){if(1&e&&(c.Qb(0,"div"),c.Lb(1,"img",18),c.Qb(2,"strong"),c.Ac(3),c.ac(4,"titlecase"),c.Pb(),c.Pb()),2&e){const e=c.Zb().$implicit;c.xb(1),c.gc("src",e.recipientPhotoUrl||"./assets/user.png",c.tc),c.gc("alt",e.recipientUsername),c.xb(2),c.Bc(c.bc(4,3,e.recipientUsername))}}function f(e,n){if(1&e&&(c.Qb(0,"div"),c.Lb(1,"img",18),c.Qb(2,"strong"),c.Ac(3),c.ac(4,"titlecase"),c.Pb(),c.Pb()),2&e){const e=c.Zb().$implicit;c.xb(1),c.gc("src",e.recipientPhotoUrl||"./assets/user.png",c.tc),c.gc("alt",e.senderUsername),c.xb(2),c.Bc(c.bc(4,3,e.recipientUsername))}}const m=function(){return{tab:3}};function p(e,n){if(1&e){const e=c.Rb();c.Qb(0,"tr",15),c.Qb(1,"td"),c.Ac(2),c.Pb(),c.Qb(3,"td"),c.yc(4,u,5,5,"div",16),c.yc(5,f,5,5,"div",16),c.Pb(),c.Qb(6,"td"),c.Ac(7),c.ac(8,"timeago"),c.Pb(),c.Qb(9,"td"),c.Qb(10,"button",17),c.Xb("click",(function(n){return c.rc(e),n.stopPropagation()}))("click",(function(){c.rc(e);const t=n.$implicit;return c.Zb(2).deleteMessage(t.id)})),c.Ac(11," Delete "),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.gc("routerLink","Outbox"===t.container?"/members/"+e.recipientUsername:"/members/"+e.senderUsername),c.fc("hidden",t.loading)("queryParams",c.ic(9,m)),c.xb(2),c.Bc(e.content),c.xb(2),c.fc("ngIf","Outbox"===t.container),c.xb(1),c.fc("ngIf","Outbox"!==t.container),c.xb(2),c.Bc(c.bc(8,7,e.messageSent))}}function h(e,n){if(1&e&&(c.Qb(0,"div",10),c.Qb(1,"table",11),c.Qb(2,"tr"),c.Qb(3,"th",12),c.Ac(4,"Message"),c.Pb(),c.Qb(5,"th",13),c.Ac(6,"From / To"),c.Pb(),c.Qb(7,"th",13),c.Ac(8,"Send / Received"),c.Pb(),c.Lb(9,"th",13),c.Pb(),c.yc(10,p,12,10,"tr",14),c.Pb(),c.Pb()),2&e){const e=c.Zb();c.xb(10),c.fc("ngForOf",e.messages)}}function P(e,n){if(1&e){const e=c.Rb();c.Qb(0,"div",19),c.Qb(1,"pagination",20),c.Xb("ngModelChange",(function(n){return c.rc(e),c.Zb().pagination.currentPage=n}))("pageChanged",(function(n){return c.rc(e),c.Zb().pageChanged(n)})),c.Pb(),c.Pb()}if(2&e){const e=c.Zb();c.xb(1),c.fc("boundaryLinks",!0)("totalItems",e.pagination.totalItems)("itemsPerPage",e.pagination.itemsPerPage)("ngModel",e.pagination.currentPage)}}const x=[{path:"",component:(()=>{class e{constructor(e,n){this.messageService=e,this.confirmService=n,this.container="Unread",this.pageNumber=1,this.pageSize=5,this.loading=!1}ngOnInit(){this.loadMessages()}loadMessages(){this.loading=!0,this.messageService.getMessages(this.pageNumber,this.pageSize,this.container).subscribe(e=>{this.messages=e.result,this.pagination=e.pagination,this.loading=!1})}pageChanged(e){this.pageNumber=e.page,this.loadMessages()}deleteMessage(e){this.confirmService.confirm("Confirm delete message","This cannot be undone").subscribe(n=>{n&&this.messageService.deleteMessage(e).subscribe(()=>{this.messages.splice(this.messages.findIndex(n=>n.id===e),1)})})}}return e.\u0275fac=function(n){return new(n||e)(c.Kb(a.a),c.Kb(r.a))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-messages"]],decls:14,vars:4,consts:[[1,"row","mb-4"],["name","container","btnRadioGroup","",1,"btn-group",3,"ngModel","ngModelChange"],["btnRadio","Unread",1,"btn","btn-primary",3,"click"],[1,"fa","fa-envelope"],["btnRadio","Inbox",1,"btn","btn-primary",3,"click"],[1,"fa","fa-envelope-open"],["btnRadio","Outbox",1,"btn","btn-primary",3,"click"],[1,"fa","fa-paper-plane"],["class","row",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"row"],[1,"table","table-hover",2,"cursor","pointer"],[2,"width","40%"],[2,"width","20%"],[3,"hidden","routerLink","queryParams",4,"ngFor","ngForOf"],[3,"hidden","routerLink","queryParams"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],[1,"img-circle","rounded-circle","mr-2",3,"src","alt"],[1,"d-flex","justify-content-center"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"]],template:function(e,n){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Xb("ngModelChange",(function(e){return n.container=e})),c.Qb(2,"button",2),c.Xb("click",(function(){return n.loadMessages()})),c.Lb(3,"i",3),c.Ac(4," Unread "),c.Pb(),c.Qb(5,"button",4),c.Xb("click",(function(){return n.loadMessages()})),c.Lb(6,"i",5),c.Ac(7," Inbox "),c.Pb(),c.Qb(8,"button",6),c.Xb("click",(function(){return n.loadMessages()})),c.Lb(9,"i",7),c.Ac(10," Outbox "),c.Pb(),c.Pb(),c.Pb(),c.yc(11,d,3,0,"div",8),c.yc(12,h,11,1,"div",8),c.yc(13,P,2,4,"div",9)),2&e&&(c.xb(1),c.fc("ngModel",n.container),c.xb(10),c.fc("ngIf",0===(null==n.messages?null:n.messages.length)),c.xb(1),c.fc("ngIf",(null==n.messages?null:n.messages.length)>0),c.xb(1),c.fc("ngIf",n.pagination&&!n.loading))},directives:[o.b,i.j,i.m,o.a,s.m,s.l,b.c,g.a],pipes:[l.b,s.t],styles:[".img-circle[_ngcontent-%COMP%]{max-height:50px}"]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(n){return new(n||e)},imports:[[b.f.forChild(x)],b.f]}),e})(),Q=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(n){return new(n||e)},imports:[[s.c,v,i.f,o.c,l.a,g.b]]}),e})()}}]);